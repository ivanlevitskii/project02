# Единое окно

Приложение для обработки обращений граждан с использованием искусственного интеллекта для определения соответствующего департамента.

## Требования

- Python 3.9+
- pip (менеджер пакетов Python)

## Установка

1. Клонируйте репозиторий:
```bash
git clone <url-репозитория>
cd <директория-проекта>
```

2. Создайте и активируйте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # для Linux/Mac
venv\Scripts\activate     # для Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

## Запуск приложения

### 1. Запуск основного API сервера

```bash
python main.py
```
Сервер будет доступен по адресу: http://localhost:8000

### 2. Запуск графического интерфейса (Streamlit)

```bash
python test_app.py
```
Интерфейс будет доступен по адресу: http://localhost:8501

### 3. Запуск консольного приложения

```bash
python console_test.py
```

## Использование

### Графический интерфейс (Streamlit)

1. Откройте http://localhost:8501 в браузере
2. Введите тему обращения
3. Введите текст обращения (минимум 10 символов)
4. Укажите контактную информацию (email или телефон)
5. Нажмите кнопку "Отправить обращение"
6. Результат будет отображен на странице:
   - Дата обращения
   - Тема обращения
   - Определенный департамент
   - Полные данные (в раскрывающемся блоке)

### Консольное приложение

1. Запустите `console_test.py`
2. Выберите действие из меню:
   - 1: Отправить обращение
   - 2: Показать список департаментов
   - 3: Выход
3. При отправке обращения:
   - Введите тему обращения
   - Введите текст обращения (минимум 10 символов)
   - Укажите контактную информацию
4. Результат будет отображен в консоли:
   - Дата обращения
   - Тема обращения
   - Определенный департамент
   - Полные данные в формате JSON

## API Endpoints

### POST /process_appeal
Обработка обращения гражданина

**Параметры:**
- `text`: Текст обращения (минимум 10 символов)
- `contact_info`: Контактная информация

**Ответ:**
```json
{
    "status": "success",
    "department": "Название департамента",
    "message": "Сообщение о результате",
    "date": "Дата и время",
    "theme": "Тема обращения"
}
```

### GET /departments
Получение списка доступных департаментов

**Ответ:**
```json
{
    "departments": [
        "Департамент транспорта",
        "Департамент культуры",
        "Департамент здравоохранения",
        "Департамент образования",
        "Департамент экологии",
        "Департамент физической культуры и спорта"
    ]
}
```

## Структура проекта

- `main.py` - Основной файл с API сервером
- `models.py` - Модели и логика классификации
- `test_app.py` - Графический интерфейс на Streamlit
- `console_test.py` - Консольное приложение для тестирования
- `requirements.txt` - Зависимости проекта

## Технологии

- **FastAPI** - Фреймворк для создания API
- **Streamlit** - Фреймворк для создания веб-интерфейса
- **Hugging Face Transformers** - Библиотека для работы с моделями машинного обучения
- **SBERT** - Модель для семантического анализа текста
- **Pydantic** - Валидация данных
- **Uvicorn** - ASGI сервер

## Преимущества DeepSeek

- Высокая точность классификации
- Хорошая поддержка русского языка
- Быстрая обработка запросов
- Конкурентные цены
- Простой API

## Тестирование

Для запуска тестов:
```bash
pytest test_main.py -v
```

## Документация API

После запуска приложения, полная документация API доступна по адресу:
- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc 